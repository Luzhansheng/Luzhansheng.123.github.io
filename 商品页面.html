<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å•†å“é¡µé¢ - Red Spider Lily</title>
<style>
  body {
    font-family: "Microsoft YaHei", Arial, sans-serif;
    background-color: #0e0e0e;
    color: #fff;
    margin: 0;
    padding: 0;
    display: flex;
    height: 100vh;
    overflow: hidden; /* é˜²æ­¢åŒé‡æ»šåŠ¨æ¡ */
  }
  
  /* --- é¡¶éƒ¨æœç´¢æ æ ·å¼ --- */
  .header-bar {
    position: fixed;
    top: 0;
    left: 200px; /* é¿å¼€å·¦ä¾§æ  */
    right: 0;
    height: 60px;
    background-color: rgba(14, 14, 14, 0.95);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 900;
    border-bottom: 1px solid #333;
    backdrop-filter: blur(5px);
  }

  .search-box {
    position: relative;
    width: 400px;
  }

  .search-input {
    width: 100%;
    padding: 10px 40px 10px 15px;
    border-radius: 20px;
    border: 1px solid #444;
    background-color: #1c1c1c;
    color: #fff;
    font-size: 14px;
    outline: none;
    transition: all 0.3s;
  }

  .search-input:focus {
    border-color: #0078d7;
    box-shadow: 0 0 8px rgba(0, 120, 215, 0.3);
  }

  .search-icon {
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: #888;
    pointer-events: none;
  }

  /* å·¦ä¾§åˆ†ç±»æ  */
  .sidebar {
    width: 200px;
    background-color: #1c1c1c;
    display: flex;
    flex-direction: column;
    padding: 15px 10px;
    box-sizing: border-box;
    border-right: 1px solid #333;
    z-index: 901; /* ä¿è¯ä¾§è¾¹æ åœ¨é¡¶æ ä¹‹ä¸Š */
  }
  .category {
    padding: 8px 10px;
    margin-bottom: 6px;
    background-color: #252525;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    user-select: none;
    transition: background-color 0.2s ease;
  }
  .category.active {
    background-color: #444;
    border: 1px solid #5aa;
    color: #5aa;
    font-weight: bold;
  }
  .category:hover {
    background-color: #3a3a3a;
  }

  /* å•†å“åŒºåŸŸ */
  .content {
    flex-grow: 1;
    padding: 15px;
    padding-top: 80px; /* ç»™é¡¶éƒ¨æœç´¢æ ç•™å‡ºç©ºé—´ */
    box-sizing: border-box;
    overflow-y: auto;
    position: relative;
  }
  .grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 15px;
  }
  .item {
    background-color: #191919;
    border: 1px solid #333;
    border-radius: 6px;
    padding: 12px;
    text-align: center;
    display: flex;
    flex-direction: column;
    opacity: 1;
    transform: scale(1);
    transition: all 0.3s ease;
    box-shadow: 0 4px 6px rgba(0,0,0,0.3);
    position: relative;
  }
  .item:hover {
    transform: translateY(-5px);
    border-color: #5aa;
    box-shadow: 0 8px 15px rgba(0,0,0,0.5);
  }
  .item img {
    width: 100%;
    height: 140px;
    object-fit: contain;
    margin-bottom: 10px;
    border-radius: 4px;
    background-color: #2a2a2a;
  }
  .item-name {
    font-size: 16px;
    color: #fff;
    font-weight: bold;
    margin-bottom: 8px;
  }
  .item-info {
    display: flex;
    justify-content: space-between;
    margin-top: 8px;
    padding-top: 8px;
    border-top: 1px solid #333;
    align-items: center;
  }
  .item-price {
    color: #ffcc00;
    font-weight: bold;
    font-size: 16px;
  }
  
  /* åŠ å…¥è´­ç‰©è½¦æŒ‰é’® */
  .add-cart-btn {
    background-color: #0078d7;
    color: white;
    border: none;
    padding: 6px 12px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 12px;
    transition: background 0.2s;
    margin-top: 10px;
    width: 100%;
  }
  .add-cart-btn:hover {
    background-color: #005a9e;
  }
  .add-cart-btn:active {
    transform: scale(0.95);
  }

  .item.hidden {
    display: none; /* ä½¿ç”¨ display:none å½»åº•éšè—ï¼Œé…åˆJSè¿‡æ»¤ */
  }

  /* --- é¡¶éƒ¨æŒ‰é’®ç»„ --- */
  .top-buttons {
    position: fixed;
    top: 15px;
    right: 30px;
    z-index: 1000;
    display: flex;
    gap: 15px;
  }

  .nav-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 16px;
    color: white;
    text-decoration: none;
    border-radius: 30px;
    font-size: 14px;
    font-weight: bold;
    border: 1px solid rgba(255,255,255,0.1);
    backdrop-filter: blur(5px);
    transition: all 0.3s;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  }

  .home-btn { background: linear-gradient(135deg, #444, #222); }
  .home-btn:hover { background: #555; transform: translateY(-2px); }

  .cart-btn { background: linear-gradient(135deg, #d70e00, #b30b00); }
  .cart-btn:hover { background: linear-gradient(135deg, #f21100, #d70e00); transform: translateY(-2px); }

  .nav-btn svg { width: 16px; height: 16px; fill: currentColor; }

  /* æç¤ºæ¡† */
  #toast {
    visibility: hidden;
    min-width: 250px;
    background-color: #333;
    color: #fff;
    text-align: center;
    border-radius: 4px;
    padding: 16px;
    position: fixed;
    z-index: 2000;
    left: 50%;
    bottom: 30px;
    transform: translateX(-50%);
    font-size: 16px;
    border: 1px solid #5aa;
    box-shadow: 0 0 10px rgba(0,0,0,0.5);
  }
  #toast.show {
    visibility: visible;
    animation: fadein 0.5s, fadeout 0.5s 2.5s;
  }
  @keyframes fadein { from {bottom: 0; opacity: 0;} to {bottom: 30px; opacity: 1;} }
  @keyframes fadeout { from {bottom: 30px; opacity: 1;} to {bottom: 0; opacity: 0;} }

</style>
</head>
<body>

<!-- é¡¶éƒ¨æŒ‰é’®ç»„ -->
<div class="top-buttons">
  <a href="index.html" class="nav-btn home-btn">
    <svg viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
    è¿”å›ä¸»é¡µ
  </a>
  <a href="è´­ç‰©è½¦æ¨¡å—.html" class="nav-btn cart-btn">
    <svg viewBox="0 0 24 24"><path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/></svg>
    è´­ç‰©è½¦ <span id="cart-count" style="margin-left:5px; background:white; color:red; padding:0 5px; border-radius:10px; font-size:12px;">0</span>
  </a>
</div>

<!-- é¡¶éƒ¨æœç´¢æ  -->
<div class="header-bar">
  <div class="search-box">
    <input type="text" id="searchInput" class="search-input" placeholder="æœç´¢å•†å“åç§°...">
    <span class="search-icon">ğŸ”</span>
  </div>
</div>

<!-- å·¦ä¾§ç«–å‘åˆ†ç±» -->
<div class="sidebar">
  <div class="category active" data-category="å…¨éƒ¨">å…¨éƒ¨å•†å“</div>
  <div class="category" data-category="ç”µå­ç‰©å“">ç”µå­ç‰©å“</div>
  <div class="category" data-category="åŒ»ç–—é“å…·">åŒ»ç–—é“å…·</div>
  <div class="category" data-category="å·¥å…·ææ–™">å·¥å…·ææ–™</div>
  <div class="category" data-category="å®¶å…·ç‰©å“">å®¶å…·ç‰©å“</div>
  <div class="category" data-category="å·¥è‰ºè—å“">å·¥è‰ºè—å“</div>
  <div class="category" data-category="èµ„æ–™æƒ…æŠ¥">èµ„æ–™æƒ…æŠ¥</div>
  <div class="category" data-category="èƒ½æºç‡ƒæ–™">èƒ½æºç‡ƒæ–™</div>
  <div class="category" data-category="èµ›å­£é™å®š">èµ›å­£é™å®š</div>
</div>

<!-- å•†å“å±•ç¤ºåŒº -->
<div class="content">
  <div class="grid" id="productGrid">
    <!-- å•†å“åˆ—è¡¨ (æ³¨æ„ï¼šä»·æ ¼éœ€è¦çº¯æ•°å­—æ–¹ä¾¿è®¡ç®—ï¼Œè¿™é‡Œæˆ‘ç”¨data-priceå­˜å‚¨) -->
    
    <div class="item" data-category="ç”µå­ç‰©å“" data-name="ä¾¿æºå†›ç”¨é›·è¾¾" data-price="2450">
      <img src="ä¾¿æºå†›ç”¨é›·è¾¾.png" alt="ä¾¿æºå†›ç”¨é›·è¾¾">
      <div class="item-name">ä¾¿æºå†›ç”¨é›·è¾¾</div>
      <div class="item-info">
        <div class="item-price">Â¥ 2,450</div>
      </div>
      <button class="add-cart-btn" onclick="addToCart('ä¾¿æºå†›ç”¨é›·è¾¾', 2450, 'ä¾¿æºå†›ç”¨é›·è¾¾.png')">åŠ å…¥è´­ç‰©è½¦</button>
    </div>
    
    <div class="item" data-category="åŒ»ç–—é“å…·" data-name="å¤è‹å‘¼å¸æœº" data-price="1850">
      <img src="å¤è‹å‘¼å¸æœº.png" alt="å¤è‹å‘¼å¸æœº">
      <div class="item-name">å¤è‹å‘¼å¸æœº</div>
      <div class="item-info">
        <div class="item-price">Â¥ 1,850</div>
      </div>
      <button class="add-cart-btn" onclick="addToCart('å¤è‹å‘¼å¸æœº', 1850, 'å¤è‹å‘¼å¸æœº.png')">åŠ å…¥è´­ç‰©è½¦</button>
    </div>
    
    <div class="item" data-category="å·¥å…·ææ–™" data-name="å†›ç”¨ç‚®å¼¹" data-price="3200">
      <img src="å†›ç”¨ç‚®å¼¹.png" alt="å†›ç”¨ç‚®å¼¹">
      <div class="item-name">å†›ç”¨ç‚®å¼¹</div>
      <div class="item-info">
        <div class="item-price">Â¥ 3,200</div>
      </div>
      <button class="add-cart-btn" onclick="addToCart('å†›ç”¨ç‚®å¼¹', 3200, 'å†›ç”¨ç‚®å¼¹.png')">åŠ å…¥è´­ç‰©è½¦</button>
    </div>

    <div class="item" data-category="å®¶å…·ç‰©å“" data-name="å¼ºåŠ›å¸å°˜å™¨" data-price="980">
      <img src="å¼ºåŠ›å¸å°˜å™¨.png" alt="å¼ºåŠ›å¸å°˜å™¨">
      <div class="item-name">å¼ºåŠ›å¸å°˜å™¨</div>
      <div class="item-info">
        <div class="item-price">Â¥ 980</div>
      </div>
      <button class="add-cart-btn" onclick="addToCart('å¼ºåŠ›å¸å°˜å™¨', 980, 'å¼ºåŠ›å¸å°˜å™¨.png')">åŠ å…¥è´­ç‰©è½¦</button>
    </div>

    <div class="item" data-category="å·¥è‰ºè—å“" data-name="éæ´²ä¹‹å¿ƒ" data-price="12500">
      <img src="éæ´²ä¹‹å¿ƒ.png" alt="éæ´²ä¹‹å¿ƒ">
      <div class="item-name">éæ´²ä¹‹å¿ƒ</div>
      <div class="item-info">
        <div class="item-price">Â¥ 12,500</div>
      </div>
      <button class="add-cart-btn" onclick="addToCart('éæ´²ä¹‹å¿ƒ', 12500, 'éæ´²ä¹‹å¿ƒ.png')">åŠ å…¥è´­ç‰©è½¦</button>
    </div>

    <div class="item" data-category="èµ„æ–™æƒ…æŠ¥" data-name="ç»å¯†æœåŠ¡å™¨" data-price="45000">
      <img src="ç»å¯†æœåŠ¡å™¨.png" alt="ç»å¯†æœåŠ¡å™¨">
      <div class="item-name">ç»å¯†æœåŠ¡å™¨</div>
      <div class="item-info">
        <div class="item-price">Â¥ 45,000</div>
      </div>
      <button class="add-cart-btn" onclick="addToCart('ç»å¯†æœåŠ¡å™¨', 45000, 'ç»å¯†æœåŠ¡å™¨.png')">åŠ å…¥è´­ç‰©è½¦</button>
    </div>

    <div class="item" data-category="èƒ½æºç‡ƒæ–™" data-name="è£…ç”²è½¦ç”µæ± " data-price="1250">
      <img src="è£…ç”²è½¦ç”µæ± .png" alt="è£…ç”²è½¦ç”µæ± ">
      <div class="item-name">è£…ç”²è½¦ç”µæ± </div>
      <div class="item-info">
        <div class="item-price">Â¥ 1,250</div>
      </div>
      <button class="add-cart-btn" onclick="addToCart('è£…ç”²è½¦ç”µæ± ', 1250, 'è£…ç”²è½¦ç”µæ± .png')">åŠ å…¥è´­ç‰©è½¦</button>
    </div>

    <div class="item" data-category="èµ›å­£é™å®š" data-name="ç‚«å½©éº¦å°è›‹" data-price="680">
      <img src="ç‚«å½©éº¦å°è›‹.png" alt="ç‚«å½©éº¦å°è›‹">
      <div class="item-name">ç‚«å½©éº¦å°è›‹</div>
      <div class="item-info">
        <div class="item-price">Â¥ 680</div>
      </div>
      <button class="add-cart-btn" onclick="addToCart('ç‚«å½©éº¦å°è›‹', 680, 'ç‚«å½©éº¦å°è›‹.png')">åŠ å…¥è´­ç‰©è½¦</button>
    </div>

    <div class="item" data-category="èµ›å­£é™å®š" data-name="è‡³çº¯æºçŸ³" data-price="320">
      <img src="è‡³çº¯æºçŸ³.png" alt="è‡³çº¯æºçŸ³">
      <div class="item-name">è‡³çº¯æºçŸ³</div>
      <div class="item-info">
        <div class="item-price">Â¥ 320</div>
      </div>
      <button class="add-cart-btn" onclick="addToCart('è‡³çº¯æºçŸ³', 320, 'è‡³çº¯æºçŸ³.png')">åŠ å…¥è´­ç‰©è½¦</button>
    </div>

  </div>
</div>

<!-- æç¤ºæ¡† -->
<div id="toast">å·²åŠ å…¥è´­ç‰©è½¦</div>

<script>
  const categories = document.querySelectorAll('.category');
  const items = document.querySelectorAll('.item');
  const searchInput = document.getElementById('searchInput');
  const cartCountSpan = document.getElementById('cart-count');

  // 1. åˆ†ç±»è¿‡æ»¤åŠŸèƒ½
  let currentCategory = 'å…¨éƒ¨';

  categories.forEach(category => {
    category.addEventListener('click', () => {
      categories.forEach(c => c.classList.remove('active'));
      category.classList.add('active');
      currentCategory = category.getAttribute('data-category');
      filterItems();
    });
  });

  // 2. æœç´¢åŠŸèƒ½
  searchInput.addEventListener('input', () => {
    filterItems();
  });

  // ç»Ÿä¸€è¿‡æ»¤å‡½æ•°ï¼ˆåŒæ—¶è€ƒè™‘åˆ†ç±»å’Œæœç´¢è¯ï¼‰
  function filterItems() {
    const searchTerm = searchInput.value.toLowerCase().trim();

    items.forEach(item => {
      const itemCategory = item.getAttribute('data-category');
      const itemName = item.getAttribute('data-name').toLowerCase();
      
      // é€»è¾‘ï¼š
      // å¦‚æœæœ‰æœç´¢è¯ï¼Œä¼˜å…ˆåŒ¹é…æœç´¢è¯ï¼ˆå¿½ç•¥åˆ†ç±»ï¼Œæˆ–è€…ä½ å¯ä»¥é€‰æ‹©åœ¨å½“å‰åˆ†ç±»ä¸‹æœç´¢ï¼‰
      // è¿™é‡Œå®ç°ä¸ºï¼šæœ‰æœç´¢è¯æ—¶ï¼Œåœ¨æ‰€æœ‰å•†å“ä¸­æœç´¢ï¼›æ— æœç´¢è¯æ—¶ï¼ŒæŒ‰åˆ†ç±»æ˜¾ç¤º
      
      let matchesSearch = itemName.includes(searchTerm);
      let matchesCategory = (currentCategory === 'å…¨éƒ¨') || (itemCategory === currentCategory);

      if (searchTerm !== "") {
        // æœç´¢æ¨¡å¼ï¼šåªçœ‹åå­—åŒ¹é…
        if (matchesSearch) {
          item.classList.remove('hidden');
        } else {
          item.classList.add('hidden');
        }
      } else {
        // åˆ†ç±»æ¨¡å¼
        if (matchesCategory) {
          item.classList.remove('hidden');
        } else {
          item.classList.add('hidden');
        }
      }
    });
  }

  // 3. è´­ç‰©è½¦é€»è¾‘ (CRUD - Create/Update)
  function addToCart(name, price, image) {
    // è·å–ç°æœ‰è´­ç‰©è½¦æ•°æ®
    let cart = JSON.parse(localStorage.getItem('shoppingCart')) || [];
    
    // æ£€æŸ¥å•†å“æ˜¯å¦å·²å­˜åœ¨
    let existingItem = cart.find(item => item.name === name);
    
    if (existingItem) {
      existingItem.quantity += 1; // å­˜åœ¨åˆ™æ•°é‡+1
    } else {
      cart.push({
        name: name,
        price: price,
        image: image,
        quantity: 1
      }); // ä¸å­˜åœ¨åˆ™æ–°å¢
    }
    
    // ä¿å­˜å› localStorage
    localStorage.setItem('shoppingCart', JSON.stringify(cart));
    
    // æ›´æ–°UI
    updateCartCount();
    showToast(`å·²å°† ${name} åŠ å…¥è´­ç‰©è½¦`);
  }

  // æ›´æ–°è´­ç‰©è½¦å›¾æ ‡ä¸Šçš„æ•°é‡
  function updateCartCount() {
    let cart = JSON.parse(localStorage.getItem('shoppingCart')) || [];
    let totalCount = cart.reduce((sum, item) => sum + item.quantity, 0);
    cartCountSpan.textContent = totalCount;
  }

  // æ˜¾ç¤ºæç¤ºæ¡†
  function showToast(message) {
    const toast = document.getElementById("toast");
    toast.textContent = message;
    toast.className = "show";
    setTimeout(function(){ toast.className = toast.className.replace("show", ""); }, 3000);
  }

  // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–æ•°é‡
  document.addEventListener('DOMContentLoaded', updateCartCount);

</script>
</body>
</html>
